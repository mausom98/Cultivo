#!/usr/bin/env node
"use strict";
var _this = this;
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var program = require("commander");
var restApi_1 = require("./restApi");
var updateNotifier = require("update-notifier");
var pkg = require('../package.json');
var tasks = {
    generateApi: function (projectName, chaincode, chaincodeConfigFile) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        console.log('in generateApi in command.ts chaincode=' + chaincode);
                        console.log('in generateApi in command.ts chaincodeConfigFile=' + chaincodeConfigFile);
                        return [4, restApi_1.RestApi.generateApi(projectName, chaincode, chaincodeConfigFile)];
                    case 1: return [2, _a.sent()];
                }
            });
        });
    }
};
program
    .command('generate <object>')
    .option('-c, --chaincode <chaincode>', 'Chaincode project')
    .option('-p, --projectname <projectname>', 'name of the API project')
    .option('-f, --chaincodeConfigFile <chaincodeConfigFile>', 'name of the chaincode configuration file')
    .action(function (object, cmd) { return tslib_1.__awaiter(_this, void 0, void 0, function () {
    var _a;
    return tslib_1.__generator(this, function (_b) {
        switch (_b.label) {
            case 0:
                if ((!cmd || !cmd.chaincode) && object == 'api') {
                    throw new Error('Please specify the chaincode project with the parameter -c');
                }
                if ((!cmd || !cmd.projectname) && object == 'api') {
                    throw new Error('Please specify the project name with the parameter -p');
                }
                if ((!cmd || !cmd.chaincodeConfigFile) && object == 'api') {
                    cmd.chaincodeConfigFile = 'org1.' + cmd.chaincode + '.config.json';
                    console.log("cmd.chaincodeConfigFile==" + cmd.chaincodeConfigFile);
                }
                _a = object;
                switch (_a) {
                    case 'api': return [3, 1];
                }
                return [3, 3];
            case 1: return [4, tasks.generateApi(cmd.projectname, cmd.chaincode, cmd.chaincodeConfigFile)];
            case 2: return [2, _b.sent()];
            case 3: throw new Error("Option " + object + " is not a valid generator. Try with 'api'.");
        }
    });
}); });
updateNotifier({
    pkg: pkg,
    updateCheckInterval: 1000 * 60
}).notify();
program.parse(process.argv);
//# sourceMappingURL=command.js.map